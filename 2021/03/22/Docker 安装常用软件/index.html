

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/blog145-128.jpg">
  <link rel="icon" href="/img/blog145-128.jpg">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="知临">
  <meta name="keywords" content="">
  
  <title>Docker 安装常用软件 - 知临的博客</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.4.0/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"chiyujiang.gitee.io","root":"/","version":"1.8.9","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}}};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.4.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>知临</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                友链
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="iconfont icon-music"></i>
                音乐
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                
                  
                  
                  
                  <a class="dropdown-item" target="_blank" rel="noopener" href="https://music.163.com/">
                    
                    网易云音乐
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" target="_blank" rel="noopener" href="https://github.com/listen1/listen1">
                    
                    Listen 1
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/music/">
                    
                    最近常听
                  </a>
                
              </div>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" href="javascript:">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/wallhaven-4yylek.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="Docker 安装常用软件">
              
            </span>

            
              <div class="mt-3">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-author" aria-hidden="true"></i>
      知临
    </span>
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2021-03-22 11:51" pubdate>
        2021年3月22日 中午
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      2.6k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      41
       分钟
    </span>
  

  
  
    
      <!-- 不蒜子统计文章PV -->
      <span id="busuanzi_container_page_pv" style="display: none">
        <i class="iconfont icon-eye" aria-hidden="true"></i>
        <span id="busuanzi_value_page_pv"></span> 次
      </span>
    
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Docker 安装常用软件</h1>
            
              <p class="note note-info">
                
                  本文最后更新于：2021年3月22日 中午
                
              </p>
            
            <div class="markdown-body">
              <h1 id="Linux环境配置"><a href="#Linux环境配置" class="headerlink" title="Linux环境配置"></a>Linux环境配置</h1><h2 id="Linux配置jdk8环境两种方式"><a href="#Linux配置jdk8环境两种方式" class="headerlink" title="Linux配置jdk8环境两种方式"></a>Linux配置jdk8环境两种方式</h2><ul>
<li> <strong>yum安装，默认路径(  usr/lib/jvm/  )，不用配置</strong></li>
</ul>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">1</span>、查询要安装jdk的版本：<br><span class="hljs-attribute">yum</span> -y list java*<br><br><span class="hljs-attribute">2</span>、安装jdk<span class="hljs-number">1</span>.<span class="hljs-number">8</span><br><span class="hljs-attribute">yum</span> install -y java-<span class="hljs-number">1</span>.<span class="hljs-number">8</span>.<span class="hljs-number">0</span>-openjdk.x<span class="hljs-number">86</span>_<span class="hljs-number">64</span><br><br><span class="hljs-attribute">3</span>、查询jdk版本<br><span class="hljs-attribute">java</span> -version<br></code></pre></td></tr></table></figure>

<ul>
<li><strong>手动安装，需配置环境 (  /usr/local/java/  )</strong></li>
</ul>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs routeros">1、进入安装目录<br>cd /usr/local<br><br>2、创建安装jdk的文件夹(可省略)<br>mkdir java<br><br>3、解压缩下载好的jdk<br>tar -zxvf jdk-8u251-linux-x64.tar.gz -C /usr/local/java<br><br>4、打开/etc/profile<br>vim /etc/profile<br><br>5、在 /etc<span class="hljs-built_in">/profile </span>文件追加下面内容<br><span class="hljs-builtin-name">export</span> <span class="hljs-attribute">JAVA_HOME</span>=/usr/local/java/jdk1.8.0_251<br><span class="hljs-builtin-name">export</span> <span class="hljs-attribute">JRE_HOME</span>=<span class="hljs-variable">$&#123;JAVA_HOME&#125;</span>/jre<br><span class="hljs-builtin-name">export</span> <span class="hljs-attribute">CLASSPATH</span>=.:$&#123;JAVA_HOME&#125;/lib:<span class="hljs-variable">$&#123;JRE_HOME&#125;</span>/lib:<span class="hljs-variable">$CLASSPATH</span><br><span class="hljs-builtin-name">export</span> <span class="hljs-attribute">JAVA_PATH</span>=<span class="hljs-variable">$&#123;JAVA_HOME&#125;</span>/bin:$&#123;JRE_HOME&#125;/bin<br><span class="hljs-builtin-name">export</span> <span class="hljs-attribute">PATH</span>=<span class="hljs-variable">$PATH</span>:$&#123;JAVA_PATH&#125;<br><br>6、生效配置文件<br>source /etc/profile<br><br>7、校验查询jdk版本<br>java -version<br></code></pre></td></tr></table></figure>



<h2 id="Linux安装配置maven"><a href="#Linux安装配置maven" class="headerlink" title="Linux安装配置maven"></a>Linux安装配置maven</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-number">1</span>、进入安装目录 并复制安装包<br>cd <span class="hljs-regexp">/usr/</span>local<br><br><span class="hljs-number">2</span>、解压下载好的maven<br>tar -zxvf apache-maven-<span class="hljs-number">3.6</span>.<span class="hljs-number">3</span>-bin.tar.gz<br><br><span class="hljs-number">3</span>、配置国内的maven仓库<br>cd apache-maven-<span class="hljs-number">3.6</span>.<span class="hljs-number">3</span>/<br><br>mkdir ck    <span class="hljs-comment">#创建maven仓库ck目录</span><br><br><span class="hljs-number">4</span>、进入cd conf目录，编辑 vi settings.xml文件，找到·localRepository下面复制一行加上<br>cd conf            <span class="hljs-comment"># 进入conf目录</span><br><br>vim settings.xml   <span class="hljs-comment"># settings.xm文件</span><br><br><span class="hljs-comment">#maven仓库地址</span><br>&lt;localRepository&gt;<span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/apache-maven-3.6.3/</span>ck&lt;/localRepository&gt;    <br><br><span class="hljs-comment">#maven国内源</span><br>&lt;mirror&gt;<br>      &lt;id&gt;alimaven&lt;/id&gt;<br>      &lt;name&gt;aliyun maven&lt;/name&gt;<br>       &lt;url&gt;http:<span class="hljs-regexp">//m</span>aven.aliyun.com<span class="hljs-regexp">/nexus/</span>content<span class="hljs-regexp">/groups/</span>public<span class="hljs-regexp">/&lt;/u</span>rl&gt;<br>      &lt;mirrorOf&gt;central&lt;/mirrorOf&gt;<br>&lt;/mirror&gt;<br><br><span class="hljs-number">5</span>、配置环境变量<br>vim <span class="hljs-regexp">/etc/</span>profile<br><br>export MAVEN_HOME=<span class="hljs-regexp">/usr/</span>local/apache-maven-<span class="hljs-number">3.6</span>.<span class="hljs-number">3</span><br>export PATH=<span class="hljs-variable">$PATH</span>:<span class="hljs-variable">$MAVEN_HOME</span>/bin<br><br><span class="hljs-number">6</span>、使配置文件生效<br>source <span class="hljs-regexp">/etc/</span>profile<br><br><span class="hljs-number">7</span>、测试maven<br>mvn -v<br></code></pre></td></tr></table></figure>



<h1 id="Docker-安装常用软件"><a href="#Docker-安装常用软件" class="headerlink" title="Docker 安装常用软件"></a>Docker 安装常用软件</h1><h2 id="Linux-CentOS7-安装Docker"><a href="#Linux-CentOS7-安装Docker" class="headerlink" title="Linux(CentOS7)安装Docker"></a>Linux(CentOS7)安装Docker</h2><hr>
<ul>
<li><strong>安装之前最好永久关闭防火墙</strong></li>
</ul>
<figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs vala"><span class="hljs-meta">#1、查看防火墙状态</span><br>systemctl status firewalld<br><br><span class="hljs-meta">#2:暂时关闭防火墙</span><br>systemctl stop firewalld<br><br><span class="hljs-meta">#3:永久关闭防火墙</span><br>systemctl disable firewalld<br><br><span class="hljs-meta">#4:重启防火墙</span><br>systemctl enable firewalld<br>  <br></code></pre></td></tr></table></figure>

<ul>
<li><strong>开始安装docker</strong></li>
</ul>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs livescript"><span class="hljs-comment">#卸载系统之前的</span><br>sudo yum remove docker <span class="hljs-string">\</span><br>                  docker-client <span class="hljs-string">\</span><br>                  docker-client-latest <span class="hljs-string">\</span><br>                  docker-common <span class="hljs-string">\</span><br>                  docker-latest <span class="hljs-string">\</span><br>                  docker-latest-logrotate <span class="hljs-string">\</span><br>                  docker-logrotate <span class="hljs-string">\</span><br>                  docker-engine<br>                 <br>sudo yum install -y yum-utils<br><br><span class="hljs-comment"># 配置镜像</span><br>sudo yum-config-manager <span class="hljs-string">\</span><br>    --add-repo <span class="hljs-string">\</span><br>    https:<span class="hljs-regexp">//download.docker.com/linux/centos/docker-ce.repo</span><br><span class="hljs-regexp">    </span><br><span class="hljs-regexp">sudo yum install docker-ce docker-ce-cli containerd.io</span><br><span class="hljs-regexp"></span><br><span class="hljs-regexp">systemctl start docker</span><br><span class="hljs-regexp"><span class="hljs-comment"># 设置开机自启动</span></span><br><span class="hljs-regexp">systemctl enable docker</span><br><span class="hljs-regexp"></span><br><span class="hljs-regexp">docker -v</span><br><span class="hljs-regexp">docker images</span><br><span class="hljs-regexp"></span><br><span class="hljs-regexp"><span class="hljs-comment"># 配置镜像加速</span></span><br></code></pre></td></tr></table></figure>

<ul>
<li><strong>配置阿里云仓库</strong></li>
</ul>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs awk">sudo mkdir -p <span class="hljs-regexp">/etc/</span>docker<br>sudo tee <span class="hljs-regexp">/etc/</span>docker/daemon.json &lt;&lt;-<span class="hljs-string">&#x27;EOF&#x27;</span><br>&#123;<br>  <span class="hljs-string">&quot;registry-mirrors&quot;</span>: [<span class="hljs-string">&quot;https://cxa8dd3m.mirror.aliyuncs.com&quot;</span>]<br>&#125;<br>EOF<br>sudo systemctl daemon-reload<br>sudo systemctl restart docker<br></code></pre></td></tr></table></figure>



<p><strong>在使用docker之前，为防止软件远程冲突，先关闭虚拟机的防火墙</strong></p>
<figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs vala"><span class="hljs-meta">#查看防火墙状态</span><br>firewall-cmd --state<br><br><span class="hljs-meta">#停止防火墙firewall</span><br>systemctl stop firewalld.service<br><br><span class="hljs-meta">#禁止firewall开机启动</span><br>systemctl disable firewalld.service <br><br></code></pre></td></tr></table></figure>



<hr>
<h2 id="Docker安装MySQL5-7"><a href="#Docker安装MySQL5-7" class="headerlink" title="Docker安装MySQL5.7"></a>Docker安装MySQL5.7</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs awk">docker pull mysql:<span class="hljs-number">5.7</span><br><br><span class="hljs-comment"># --name指定容器名字 -v目录挂载 -p指定端口映射  -e设置mysql参数 -d后台运行</span><br>docker run -p <span class="hljs-number">3306</span>:<span class="hljs-number">3306</span> --name mysql5.<span class="hljs-number">7</span> \<br>-v <span class="hljs-regexp">/mydata/my</span>sql<span class="hljs-regexp">/log:/</span>var<span class="hljs-regexp">/log/my</span>sql \<br>-v <span class="hljs-regexp">/mydata/my</span>sql<span class="hljs-regexp">/data:/</span>var<span class="hljs-regexp">/lib/my</span>sql \<br>-v <span class="hljs-regexp">/mydata/my</span>sql<span class="hljs-regexp">/conf:/</span>etc/mysql \<br>-e MYSQL_ROOT_PASSWORD=root \<br>-d mysql:<span class="hljs-number">5.7</span><br></code></pre></td></tr></table></figure>

<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">docker</span> ps<br><span class="hljs-attribute">CONTAINER</span> ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                               NAMES<br><span class="hljs-attribute">6a685a33103f</span>        mysql:<span class="hljs-number">5</span>.<span class="hljs-number">7</span>           <span class="hljs-string">&quot;docker-entrypoint.s…&quot;</span>   <span class="hljs-number">32</span> seconds ago      Up <span class="hljs-number">30</span> seconds       <span class="hljs-number">0.0.0.0:3306</span>-&gt;<span class="hljs-number">3306</span>/tcp, <span class="hljs-number">33060</span>/tcp   mysql<br><br></code></pre></td></tr></table></figure>

<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">docker exec -it mysql5<span class="hljs-number">.7</span> bin/bash<br><span class="hljs-keyword">exit</span>;<br><br>#在容器外部配置<br>vim /mydata/mysql/conf/my.conf <br><br>[client]<br><span class="hljs-keyword">default</span>-<span class="hljs-type">character</span>-<span class="hljs-keyword">set</span>=utf8<br>[mysql]<br><span class="hljs-keyword">default</span>-<span class="hljs-type">character</span>-<span class="hljs-keyword">set</span>=utf8<br>[mysqld]<br>init_connect=<span class="hljs-string">&#x27;SET collation_connection = utf8_unicode_ci&#x27;</span><br>init_connect=<span class="hljs-string">&#x27;SET NAMES utf8&#x27;</span><br><span class="hljs-type">character</span>-<span class="hljs-keyword">set</span>-<span class="hljs-keyword">server</span>=utf8<br><span class="hljs-keyword">collation</span>-<span class="hljs-keyword">server</span>=utf8_unicode_ci<br>skip-<span class="hljs-type">character</span>-<span class="hljs-keyword">set</span>-client-handshake<br>skip-<span class="hljs-type">name</span>-resolve<br><br><br>#配置好之后重启<br>docker <span class="hljs-keyword">restart</span> mysql5<span class="hljs-number">.7</span><br></code></pre></td></tr></table></figure>

<ul>
<li><strong>设置启动docker时，即运行mysql</strong></li>
</ul>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">docker</span> update mysql<span class="hljs-number">5</span>.<span class="hljs-number">7</span> --restart=always<br></code></pre></td></tr></table></figure>



<hr>
<h2 id="Docker安装MySQL8"><a href="#Docker安装MySQL8" class="headerlink" title="Docker安装MySQL8"></a>Docker安装MySQL8</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs awk">docker pull mysql:<span class="hljs-number">8.0</span><br><br><span class="hljs-comment"># --name指定容器名字 -v目录挂载 -p指定端口映射  -e设置mysql参数 -d后台运行</span><br>docker run -p <span class="hljs-number">3306</span>:<span class="hljs-number">3306</span> --name mysql8 \<br>-v <span class="hljs-regexp">/mydata/my</span>sql8<span class="hljs-regexp">/log:/</span>var<span class="hljs-regexp">/log/my</span>sql \<br>-v <span class="hljs-regexp">/mydata/my</span>sql8<span class="hljs-regexp">/data:/</span>var<span class="hljs-regexp">/lib/my</span>sql \<br>-v <span class="hljs-regexp">/mydata/my</span>sql8<span class="hljs-regexp">/conf:/</span>etc/mysql \<br>-e MYSQL_ROOT_PASSWORD=root \<br>-d mysql:<span class="hljs-number">8.0</span><br><br></code></pre></td></tr></table></figure>

<ul>
<li><strong>mysql8的配置文件</strong></li>
</ul>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#在容器外部配置</span><br>vim <span class="hljs-regexp">/mydata/my</span>sql8<span class="hljs-regexp">/conf/my</span>.conf<br><br><span class="hljs-comment">#复制粘贴以下内容</span><br><br>[client]<br>default-character-set=utf8mb4<br>[mysql]<br>default-character-set=utf8mb4<br>[mysqld]<br>init_connect=<span class="hljs-string">&#x27;SET collation_connection = utf8_unicode_ci&#x27;</span><br>init_connect=<span class="hljs-string">&#x27;SET NAMES utf8&#x27;</span><br>character-set-server=utf8mb4<br>collation-server=utf8_unicode_ci<br>skip-character-set-client-handshake<br>skip-name-resolve<br><br>pid-file = <span class="hljs-regexp">/var/</span>run<span class="hljs-regexp">/mysqld/my</span>sqld.pid<br>socket = <span class="hljs-regexp">/var/</span>run<span class="hljs-regexp">/mysqld/my</span>sqld.sock<br>datadir = <span class="hljs-regexp">/var/</span>lib/mysql<br>secure-file-priv= NULL<br><br><span class="hljs-comment"># Disabling symbolic-links is recommended to prevent assorted security risks</span><br>symbolic-links=<span class="hljs-number">0</span><br><br><span class="hljs-comment"># Custom config should go here</span><br>!includedir <span class="hljs-regexp">/etc/my</span>sql<span class="hljs-regexp">/conf.d/</span><br><br><span class="hljs-comment">#配置好之后重启</span><br>docker restart mysql8<br><br></code></pre></td></tr></table></figure>

<ul>
<li><strong>mysql8加密方式与其他版本不同，安装之后需要进行一些才能远程连接</strong></li>
</ul>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">docker exec -it mysql8 bin/bash<br><br>mysql -u root -p <br>use mysql; <br><span class="hljs-keyword">update</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">set</span> host = <span class="hljs-string">&#x27;%&#x27;</span> <span class="hljs-keyword">where</span> <span class="hljs-keyword">user</span> = <span class="hljs-string">&#x27;root&#x27;</span>;<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">&#x27;root&#x27;</span>@<span class="hljs-string">&#x27;%&#x27;</span> IDENTIFIED <span class="hljs-keyword">WITH</span> mysql_native_password <span class="hljs-keyword">BY</span> <span class="hljs-string">&#x27;root&#x27;</span>; <br><span class="hljs-keyword">select</span> <span class="hljs-keyword">user</span>,host,plugin <span class="hljs-keyword">from</span> <span class="hljs-keyword">user</span>;<br>flush <span class="hljs-keyword">privileges</span>;<br></code></pre></td></tr></table></figure>



<hr>
<h2 id="Docker安装Redis"><a href="#Docker安装Redis" class="headerlink" title="Docker安装Redis"></a>Docker安装Redis</h2><ul>
<li>下载docker（这里以最新版为例）</li>
</ul>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">docker pull redis</span><br></code></pre></td></tr></table></figure>

<ul>
<li>启动docker</li>
</ul>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs gradle">[root@localhost ~]# mkdir -p <span class="hljs-regexp">/mydata/</span>redis/conf<br>[root@localhost ~]# touch <span class="hljs-regexp">/mydata/</span>redis<span class="hljs-regexp">/conf/</span>redis.conf<br>[root@localhost ~]# echo <span class="hljs-string">&quot;appendonly yes&quot;</span>  &gt;&gt; <span class="hljs-regexp">/mydata/</span>redis<span class="hljs-regexp">/conf/</span>redis.conf<br>[root@localhost ~]# docker run -p <span class="hljs-number">6379</span>:<span class="hljs-number">6379</span> --name redis -v <span class="hljs-regexp">/mydata/</span>redis<span class="hljs-regexp">/data:/</span>data \<br>-v <span class="hljs-regexp">/mydata/</span>redis<span class="hljs-regexp">/conf/</span>redis.conf:<span class="hljs-regexp">/etc/</span>redis/redis.conf \<br>-d redis redis-server <span class="hljs-regexp">/etc/</span>redis/redis.conf<br><br></code></pre></td></tr></table></figure>

<ul>
<li>连接到docker的redis</li>
</ul>
<figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs accesslog"><span class="hljs-string">[root@localhost ~]</span># docker exec -it redis redis-cli<br><span class="hljs-number">127.0.0.1:6379</span>&gt; set key1 v1<br>OK<br><span class="hljs-number">127.0.0.1:6379</span>&gt; get key1<br><span class="hljs-string">&quot;v1&quot;</span><br><span class="hljs-number">127.0.0.1:6379</span>&gt; <br></code></pre></td></tr></table></figure>

<ul>
<li>设置redis容器在docker启动的时候启动</li>
</ul>
<figure class="highlight golo"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs golo">root<span class="hljs-meta">@localhost</span> ~]<span class="hljs-comment"># docker update redis --restart=always</span><br>redis<br>[root<span class="hljs-meta">@localhost</span> ~]<span class="hljs-comment"># </span><br></code></pre></td></tr></table></figure>



<hr>
<h2 id="Docker安装MongoDB"><a href="#Docker安装MongoDB" class="headerlink" title="Docker安装MongoDB"></a>Docker安装MongoDB</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#拉取镜像 </span><br>docker pull mongo:latest<br><br><span class="hljs-comment">#创建和启动容器 </span><br>docker run -d --restart=always -p <span class="hljs-number">27017</span>:<span class="hljs-number">27017</span> --name mongodb -v <span class="hljs-regexp">/mydata/</span>data<span class="hljs-regexp">/db:/</span>data/db -d mongo<br><br><span class="hljs-comment">#进入容器 </span><br>docker exec -it mongodb <span class="hljs-regexp">/bin/</span>bash <br><br><span class="hljs-comment">#使用MongoDB客户端进行操作 </span><br>mongo <br><br>&gt; show dbs <span class="hljs-comment">#查询所有的数据库 </span><br>admin <span class="hljs-number">0.000</span>GB <br>config <span class="hljs-number">0.000</span>GB <br>local <span class="hljs-number">0.000</span>GB <br><br><br></code></pre></td></tr></table></figure>



<hr>
<h2 id="Docker安装ElasticSearch-7-x"><a href="#Docker安装ElasticSearch-7-x" class="headerlink" title="Docker安装ElasticSearch 7.x"></a>Docker安装ElasticSearch 7.x</h2><p><code>注意</code>   <strong>ElasticSearch、ik分词器、kibana版本要一致 (这里以7.6.2版本为例）</strong></p>
<ul>
<li><code>注意</code>   <strong>调高JVM线程数限制数量</strong></li>
</ul>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs vim"># <span class="hljs-number">1</span>.在centos虚拟机中，修改配置sysctl.<span class="hljs-keyword">conf</span><br>	<span class="hljs-keyword">vim</span> /etc/sysctl.<span class="hljs-keyword">conf</span><br># <span class="hljs-number">2</span>.加入如下配置<br>	<span class="hljs-keyword">vm</span>.max_map_count=<span class="hljs-number">262144</span> <br># <span class="hljs-number">3</span>.启用配置<br>	sysctl -<span class="hljs-keyword">p</span><br>	注：这一步是为了防止启动容器时，报出如下错误：<br>	bootstrap checks failed <span class="hljs-built_in">max</span> virtual memory areas <span class="hljs-keyword">vm</span>.max_map_count [<span class="hljs-number">65530</span>] likely too low, increase <span class="hljs-keyword">to</span> at least [<span class="hljs-number">262144</span>]<br></code></pre></td></tr></table></figure>

<ul>
<li><strong>下载ealastic search和kibana</strong></li>
</ul>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">docker</span> pull elasticsearch:<span class="hljs-number">7</span>.<span class="hljs-number">6</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">docker</span> pull kibana:<span class="hljs-number">7</span>.<span class="hljs-number">6</span>.<span class="hljs-number">2</span><br></code></pre></td></tr></table></figure>

<ul>
<li>配置</li>
</ul>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">mkdir</span> -p /mydata/elasticsearch<span class="hljs-number">7</span>.<span class="hljs-number">6</span>.<span class="hljs-number">2</span>/config<br><span class="hljs-attribute">mkdir</span> -p /mydata/elasticsearch<span class="hljs-number">7</span>.<span class="hljs-number">6</span>.<span class="hljs-number">2</span>/data<br><span class="hljs-attribute">echo</span> <span class="hljs-string">&quot;http.host: 0.0.0.0&quot;</span> &gt;/mydata/elasticsearch<span class="hljs-number">7</span>.<span class="hljs-number">6</span>.<span class="hljs-number">2</span>/config/elasticsearch.yml<br><span class="hljs-attribute">chmod</span> -R <span class="hljs-number">777</span> /mydata/elasticsearch<span class="hljs-number">7</span>.<span class="hljs-number">6</span>.<span class="hljs-number">2</span>/<br></code></pre></td></tr></table></figure>

<ul>
<li>启动Elastic search</li>
</ul>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs awk">docker run --name elasticsearch7.<span class="hljs-number">6.2</span> -p <span class="hljs-number">9200</span>:<span class="hljs-number">9200</span> -p <span class="hljs-number">9300</span>:<span class="hljs-number">9300</span> \<br>-e  <span class="hljs-string">&quot;discovery.type=single-node&quot;</span> \<br>-e ES_JAVA_OPTS=<span class="hljs-string">&quot;-Xms64m -Xmx512m&quot;</span> \<br>-v <span class="hljs-regexp">/mydata/</span>elasticsearch7.<span class="hljs-number">6.2</span><span class="hljs-regexp">/config/</span>elasticsearch.yml:<span class="hljs-regexp">/usr/</span>share<span class="hljs-regexp">/elasticsearch/</span>config/elasticsearch.yml \<br>-v <span class="hljs-regexp">/mydata/</span>elasticsearch7.<span class="hljs-number">6.2</span><span class="hljs-regexp">/data:/u</span>sr<span class="hljs-regexp">/share/</span>elasticsearch/data \<br>-v <span class="hljs-regexp">/mydata/</span>elasticsearch7.<span class="hljs-number">6.2</span><span class="hljs-regexp">/plugins:/u</span>sr<span class="hljs-regexp">/share/</span>elasticsearch/plugins \<br>-d elasticsearch:<span class="hljs-number">7.6</span>.<span class="hljs-number">2</span> <br></code></pre></td></tr></table></figure>

<ul>
<li>设置开机启动elasticsearch (也可不设置)</li>
</ul>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">docker</span> update elasticsearch<span class="hljs-number">7</span>.<span class="hljs-number">6</span>.<span class="hljs-number">2</span> --restart=always<br></code></pre></td></tr></table></figure>



<ul>
<li>**安装IK分词器  **</li>
</ul>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-comment"># 注意版本 可去GitHub复制对应版本网址的链接</span><br><span class="hljs-comment"># 在外部挂载的/mydata/elasticsearch7.6.2/plugins  执行以下命令</span><br><br>	<span class="hljs-attribute">wget</span> https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v<span class="hljs-number">7</span>.<span class="hljs-number">6</span>.<span class="hljs-number">2</span>/elasticsearch-analysis-ik-<span class="hljs-number">7</span>.<span class="hljs-number">6</span>.<span class="hljs-number">2</span>.zip<br><br><span class="hljs-comment"># 解压到plugins文件夹中</span><br>	<span class="hljs-attribute">yum</span> install -y unzip<br>	<span class="hljs-attribute">unzip</span> -d ik<span class="hljs-number">7</span>.<span class="hljs-number">6</span>.<span class="hljs-number">2</span> elasticsearch-analysis-ik-<span class="hljs-number">7</span>.<span class="hljs-number">6</span>.<span class="hljs-number">2</span>.zip <br>	<br><span class="hljs-comment">#删除elasticsearch-analysis-ik-7.6.2.zip 包 </span><br>	<span class="hljs-attribute">rm</span> -rf elasticsearch-analysis-ik-<span class="hljs-number">7</span>.<span class="hljs-number">6</span>.<span class="hljs-number">2</span>.zip<br>	<br><span class="hljs-comment">#重启elasticsearch7.6.2容器</span><br>	<span class="hljs-attribute">docker</span> stop elasticsearch<span class="hljs-number">7</span>.<span class="hljs-number">6</span>.<span class="hljs-number">2</span><br>	<span class="hljs-attribute">docker</span> restart elasticsearch<span class="hljs-number">7</span>.<span class="hljs-number">6</span>.<span class="hljs-number">2</span> <br>	<br>	<span class="hljs-attribute">docker</span> logs -f elasticsearch<span class="hljs-number">7</span>.<span class="hljs-number">6</span>.<span class="hljs-number">2</span>  #含loaded plugin<span class="hljs-meta"> [analysis-ik] 表示已加载ik分词器</span><br><span class="hljs-meta">	</span><br></code></pre></td></tr></table></figure>



<ul>
<li><strong>启动kibana</strong></li>
</ul>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-comment"># 注意IP地址 ,为虚拟机的局域网IP</span><br><span class="hljs-comment"># 注意出现 Kibana server is not ready yet  请关闭防火墙</span><br><br>	<span class="hljs-attribute">docker</span> run --name kibana<span class="hljs-number">7</span>.<span class="hljs-number">6</span>.<span class="hljs-number">2</span> -e ELASTICSEARCH_HOSTS=http://<span class="hljs-number">192.168.195.129:9200</span> -p <span class="hljs-number">5601</span>:<span class="hljs-number">5601</span> -d kibana:<span class="hljs-number">7</span>.<span class="hljs-number">6</span>.<span class="hljs-number">2</span><br><br><span class="hljs-comment">#设置开机自启kibana7.6.2</span><br>	<span class="hljs-attribute">docker</span> update kibana<span class="hljs-number">7</span>.<span class="hljs-number">6</span>.<span class="hljs-number">2</span>  --restart=always<br>	<br></code></pre></td></tr></table></figure>



<hr>
<h2 id="Docker安装Nacos"><a href="#Docker安装Nacos" class="headerlink" title="Docker安装Nacos"></a>Docker安装Nacos</h2><ul>
<li><strong>nacos更新得比较快，安装前最好先搜索查看一下版本</strong> </li>
</ul>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://nacos.io/zh-cn/docs/quick-start-docker.html">https://nacos.io/zh-cn/docs/quick-start-docker.html</a></p>
</blockquote>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment">#这里安装 以 1.3.2版本为例</span><br>docker pull nacos/nacos-server:1.3.2<br><span class="hljs-comment">#创建映射文件夹</span><br>mkdir -p /mydata/nacos1.3.2/logs<br><br><span class="hljs-comment"># -e MODE=standalone 为单机   默认数据库 MySQL</span><br>docker <span class="hljs-builtin-name">run</span> --name nacos1.3.2 \<br>-e <span class="hljs-attribute">PREFER_HOST_MODE</span>=ip \<br>-e <span class="hljs-attribute">MODE</span>=standalone \<br>-e <span class="hljs-attribute">SPRING_DATASOURCE_PLATFORM</span>=mysql \<br>-e <span class="hljs-attribute">MYSQL_SERVICE_HOST</span>=47.119.183.206 \<br>-e <span class="hljs-attribute">MYSQL_SERVICE_PORT</span>=3306 \<br>-e <span class="hljs-attribute">MYSQL_SERVICE_USER</span>=root \<br>-e <span class="hljs-attribute">MYSQL_SERVICE_PASSWORD</span>=root \<br>-e <span class="hljs-attribute">MYSQL_SERVICE_DB_NAME</span>=nacos_config \<br>-e <span class="hljs-attribute">TIME_ZONE</span>=<span class="hljs-string">&#x27;Asia/Shanghai&#x27;</span> \<br>-v /mydata/nacos1.3.2/logs:/home/nacos/logs \<br>-p 8848:8848 \<br>-d nacos/nacos-server:1.3.2<br><br><span class="hljs-comment">#开机自启</span><br>docker update nacos1.3.2 <span class="hljs-attribute">--restart</span>=always<br><br><br></code></pre></td></tr></table></figure>



<ul>
<li><strong>Nacos环境变量配置</strong></li>
</ul>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://nacos.io/zh-cn/docs/quick-start-docker.html">https://nacos.io/zh-cn/docs/quick-start-docker.html</a></p>
</blockquote>
<hr>
<h2 id="Docker安装Nginx"><a href="#Docker安装Nginx" class="headerlink" title="Docker安装Nginx"></a>Docker安装Nginx</h2><ul>
<li>随便启动一个nginx实例，只是为了复制出配置</li>
</ul>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">docker</span> run -p <span class="hljs-number">80</span>:<span class="hljs-number">80</span> --name nginx -d nginx:<span class="hljs-number">1</span>.<span class="hljs-number">10</span>   <br></code></pre></td></tr></table></figure>

<ul>
<li>将容器内的配置文件拷贝到/mydata/nginx/conf/ 下</li>
</ul>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs awk">mkdir -p <span class="hljs-regexp">/mydata/</span>nginx/<br>docker container cp nginx:<span class="hljs-regexp">/etc/</span>nginx<span class="hljs-regexp">/  /my</span>data<span class="hljs-regexp">/nginx/</span><br><span class="hljs-comment">#将容器中的nginx文件夹改为conf文件夹</span><br>mv <span class="hljs-regexp">/mydata/</span>nginx<span class="hljs-regexp">/nginx /my</span>data<span class="hljs-regexp">/nginx/</span>conf<br><br>mkdir -p <span class="hljs-regexp">/mydata/</span>nginx/html<br>mkdir -p <span class="hljs-regexp">/mydata/</span>nginx/logs<br><br></code></pre></td></tr></table></figure>

<ul>
<li>终止原nginx容器并删除</li>
</ul>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">docker <span class="hljs-built_in">stop</span> nginx<br>docker rm nginx<br></code></pre></td></tr></table></figure>

<ul>
<li>创建新的Nginx，执行以下命令</li>
</ul>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs awk">docker run -p <span class="hljs-number">80</span>:<span class="hljs-number">80</span> --name nginx \<br> -v <span class="hljs-regexp">/mydata/</span>nginx<span class="hljs-regexp">/html:/u</span>sr<span class="hljs-regexp">/share/</span>nginx/html \<br> -v <span class="hljs-regexp">/mydata/</span>nginx<span class="hljs-regexp">/logs:/</span>var<span class="hljs-regexp">/log/</span>nginx \<br> -v <span class="hljs-regexp">/mydata/</span>nginx<span class="hljs-regexp">/conf/</span>:<span class="hljs-regexp">/etc/</span>nginx \<br> -d nginx:<span class="hljs-number">1.10</span><br><br></code></pre></td></tr></table></figure>

<ul>
<li>创建“/mydata/nginx/html/index.html”文件，测试是否能够正常访问</li>
</ul>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">echo <span class="hljs-string">&#x27;&lt;h2&gt;hello nginx!&lt;/h2&gt;&#x27;</span> &gt;<span class="hljs-regexp">/mydata/</span>nginx<span class="hljs-regexp">/html/i</span>ndex.html<br><br></code></pre></td></tr></table></figure>

<ul>
<li>设置开机启动nginx</li>
</ul>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">docker <span class="hljs-keyword">update</span> nginx <span class="hljs-comment">--restart=always</span><br></code></pre></td></tr></table></figure>



<hr>
<h2 id="Docker安装RabbitMQ"><a href="#Docker安装RabbitMQ" class="headerlink" title="Docker安装RabbitMQ"></a>Docker安装RabbitMQ</h2><ul>
<li>下载镜像：</li>
</ul>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">docker</span> pull rabbitmq:management<br></code></pre></td></tr></table></figure>

<ul>
<li>创建实例并启动：</li>
</ul>
<figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs brainfuck"><span class="hljs-comment">docker</span> <span class="hljs-comment">run</span> <span class="hljs-literal">-</span><span class="hljs-comment">d</span> --<span class="hljs-comment">name</span> <span class="hljs-comment">rabbitmq</span> --<span class="hljs-comment">publish</span> <span class="hljs-comment">5671:5671</span> <span class="hljs-comment">\</span><br><span class="hljs-comment"></span>--<span class="hljs-comment">publish</span> <span class="hljs-comment">5672:5672</span> --<span class="hljs-comment">publish</span> <span class="hljs-comment">4369:4369</span> --<span class="hljs-comment">publish</span> <span class="hljs-comment">25672:25672</span> --<span class="hljs-comment">publish</span> <span class="hljs-comment">15671:15671</span> --<span class="hljs-comment">publish</span> <span class="hljs-comment">15672:15672</span> <span class="hljs-comment">\</span><br><span class="hljs-comment">rabbitmq:management</span><br></code></pre></td></tr></table></figure>

<p><strong>注：</strong><br>4369 – erlang发现口<br>5672 –client端通信口</p>
<p>15672 – 管理界面ui端口<br>25672 – server间内部通信口</p>
<ul>
<li>设置开机启动</li>
</ul>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">docker <span class="hljs-keyword">update</span> rabbitmq <span class="hljs-comment">--restart=always</span><br></code></pre></td></tr></table></figure>



<blockquote>
<p>在web浏览器中输入地址：http://虚拟机ip:15672/</p>
<p>输入默认账号: guest   : guest</p>
</blockquote>
<p><strong>端口：</strong></p>
<p>5672: rabbitMq的编程语言客户端连接端口</p>
<p>15672：rabbitMq管理界面端口</p>
<p>25672：rabbitMq集群的端口</p>
<hr>
<h2 id="Docker安装Tomcat"><a href="#Docker安装Tomcat" class="headerlink" title="Docker安装Tomcat"></a>Docker安装Tomcat</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#拉取Tomcat       注意jdk版本</span><br>docker pull tomcat:jre8-slim<br><br><span class="hljs-comment"># 为了复制server.xml和tomcat-users.xml</span><br>docker run --name tomcat8 -p <span class="hljs-number">8080</span>:<span class="hljs-number">8080</span> \<br>-d tomcat:jre8-slim<br><br><span class="hljs-comment">#复制  340e188fc94e为该Tomcat容器的ID </span><br>docker cp <span class="hljs-number">340</span>e188fc94e:<span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/tomcat/</span>conf<span class="hljs-regexp">/server.xml /my</span>data<span class="hljs-regexp">/tomcat/</span>conf/<br>docker cp <span class="hljs-number">340</span>e188fc94e:<span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/tomcat/</span>conf<span class="hljs-regexp">/tomcat-users.xml /my</span>data<span class="hljs-regexp">/tomcat/</span>conf/<br><br><span class="hljs-comment">#340e188fc94e为Tomcat的ID</span><br>docker rm -f <span class="hljs-number">340</span>e188fc94e<br><br><span class="hljs-comment"># --name指定容器名字 -v目录挂载 -p指定端口映射  -e设置mysql参数 -d后台运行</span><br>docker run --name tomcat8 -p <span class="hljs-number">8080</span>:<span class="hljs-number">8080</span> \<br>-v <span class="hljs-regexp">/mydata/</span>tomcat<span class="hljs-regexp">/webapps:/u</span>sr<span class="hljs-regexp">/local/</span>tomcat/webapps \<br>-v <span class="hljs-regexp">/mydata/</span>tomcat<span class="hljs-regexp">/conf/</span>server.xml:<span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/tomcat/</span>conf/server.xml \<br>-v <span class="hljs-regexp">/mydata/</span>tomcat<span class="hljs-regexp">/conf/</span>tomcat-users.xml:<span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/tomcat/</span>conf/tomcat-users.xml \<br>-v <span class="hljs-regexp">/mydata/</span>tomcat<span class="hljs-regexp">/logs:/u</span>sr<span class="hljs-regexp">/local/</span>tomcat/logs \<br>-d tomcat:jre8-slim<br><br><span class="hljs-comment">#设置开机自启tomcat8</span><br>docker update tomcat8  --restart=always<br><br></code></pre></td></tr></table></figure>

<ul>
<li><strong>试试另一版本</strong></li>
</ul>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#拉取另一版本</span><br>docker pull tomcat:<span class="hljs-number">9</span>-jdk8<br><br><span class="hljs-comment"># 为了复制server.xml和tomcat-users.xml</span><br>docker run --name tomcat9 -p <span class="hljs-number">8080</span>:<span class="hljs-number">8080</span> \<br>-d tomcat:<span class="hljs-number">9</span>-jdk8<br><br>mkdir -p <span class="hljs-regexp">/mydata/</span>tomcat9/conf<br><br><span class="hljs-comment">#复制  a6c152a51e51为该Tomcat容器的ID </span><br>docker cp a6c152a51e51:<span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/tomcat/</span>conf<span class="hljs-regexp">/server.xml /my</span>data<span class="hljs-regexp">/tomcat9/</span>conf/<br>docker cp a6c152a51e51:<span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/tomcat/</span>conf<span class="hljs-regexp">/tomcat-users.xml /my</span>data<span class="hljs-regexp">/tomcat9/</span>conf/<br><br><span class="hljs-comment">#340e188fc94e为Tomcat的ID</span><br>docker rm -f a6c152a51e51<br><br><br><span class="hljs-comment"># --name指定容器名字 -v目录挂载 -p指定端口映射  -e设置mysql参数 -d后台运行</span><br>docker run --name tomcat9 -p <span class="hljs-number">8080</span>:<span class="hljs-number">8080</span> \<br>-v <span class="hljs-regexp">/mydata/</span>tomcat9<span class="hljs-regexp">/webapps:/u</span>sr<span class="hljs-regexp">/local/</span>tomcat/webapps \<br>-v <span class="hljs-regexp">/mydata/</span>tomcat9<span class="hljs-regexp">/conf/</span>server.xml:<span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/tomcat/</span>conf/server.xml \<br>-v <span class="hljs-regexp">/mydata/</span>tomcat9<span class="hljs-regexp">/conf/</span>tomcat-users.xml:<span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/tomcat/</span>conf/tomcat-users.xml \<br>-v <span class="hljs-regexp">/mydata/</span>tomcat9<span class="hljs-regexp">/logs:/u</span>sr<span class="hljs-regexp">/local/</span>tomcat/logs \<br>-d tomcat:<span class="hljs-number">9</span>-jdk8<br><br><span class="hljs-comment">#设置开机自启tomcat9</span><br>docker update tomcat9  --restart=always<br><br><br><br><br></code></pre></td></tr></table></figure>


            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/%E8%BF%90%E7%BB%B4/">运维</a>
                    
                      <a class="hover-with-bg" href="/categories/%E8%BF%90%E7%BB%B4/Docker/">Docker</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/Docker/">Docker</a>
                    
                      <a class="hover-with-bg" href="/tags/MySQL/">MySQL</a>
                    
                      <a class="hover-with-bg" href="/tags/Redis/">Redis</a>
                    
                      <a class="hover-with-bg" href="/tags/MongoDB/">MongoDB</a>
                    
                      <a class="hover-with-bg" href="/tags/ElasticSearch/">ElasticSearch</a>
                    
                      <a class="hover-with-bg" href="/tags/Nginx/">Nginx</a>
                    
                      <a class="hover-with-bg" href="/tags/RabbitMQ/">RabbitMQ</a>
                    
                      <a class="hover-with-bg" href="/tags/Tomcat/">Tomcat</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">
                  
                    哎呦不错吧?
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2021/03/22/SpringCloud%20%E7%AC%94%E8%AE%B0/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">SpringCloud 笔记</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2021/03/22/Git%20%E7%AC%94%E8%AE%B0/">
                        <span class="hidden-mobile">Git</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments" lazyload>
                
                  
                
                
  <div class="disqus" style="width:100%">
    <div id="disqus_thread"></div>
    
      <script type="text/javascript">
        var disqus_config = function() {
          this.page.url = 'https://chiyujiang.gitee.io/2021/03/22/Docker%20%E5%AE%89%E8%A3%85%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6/';
          this.page.identifier = '/2021/03/22/Docker%20%E5%AE%89%E8%A3%85%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6/';
        };
        Fluid.utils.lazyComments('disqus_thread', function() {
          var d = document, s = d.createElement('script');
          s.src = '//' + 'fluid' + '.disqus.com/embed.js';
          s.setAttribute('data-timestamp', new Date());
          (d.head || d.body).appendChild(s);
        });
      </script>
    
    <noscript>Please enable JavaScript to view the
      <a target="_blank" href="https://disqus.com/?ref_noscript" rel="nofollow noopener noopener">comments powered by Disqus.</a>
    </noscript>
  </div>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->

  <div class="col-lg-7 mx-auto nopadding-x-md">
    <div class="container custom post-custom mx-auto">
      <img src="/img/weixinzanshangma.png" srcset="/img/loading.gif" lazyload class="rounded mx-auto d-block mt-5" style="width:150px; height:150px;">
    </div>
  </div>


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="" rel="nofollow noopener"><span>知临</span></a> <i class="iconfont icon-love"></i> <a href="" rel="nofollow noopener"><span>博客</span></a> 
  </div>
  

  
  <!-- 备案信息 -->
  <div class="beian">
    <span>
      <a href="http://beian.miit.gov.cn/" target="_blank" rel="nofollow noopener">
        京ICP证123456号
      </a>
    </span>
    
      
        <span>
          <a
            href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=123456"
            rel="nofollow noopener"
            class="beian-police"
            target="_blank"
          >
            
              <span style="visibility: hidden; width: 0">|</span>
              <img src="/img/police_beian.png" srcset="/img/loading.gif" lazyload alt="police-icon"/>
            
            <span>京公网安备123456号</span>
          </a>
        </span>
      
    
  </div>


  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.0/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/anchor.min.js" ></script>



  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js" ></script>



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    (function () {
      var path = "/local-search.xml";
      $('#local-search-input').on('click', function() {
        searchFunc(path, 'local-search-input', 'local-search-result');
      });
      $('#modalSearch').on('shown.bs.modal', function() {
        $('#local-search-input').focus();
      });
    })()
  </script>















<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


</body>
</html>
